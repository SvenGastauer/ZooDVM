scale_color_discrete(name = "Y series", labels = c("Y2", "Y1"))
p+geom_line(data.frame(clines),mapping=aes(x=Dive,y=thermo_c,color='white'),size=1, name='Temperature')+
geom_line(data.frame(clines),mapping=aes(x=Dive,y=fluo_c,color='gray'),size=1,name='Fluorescence')+
geom_line(data.frame(clines),mapping=aes(x=Dive,y=sal_c),size=1,name='Salinity')+
scale_color_discrete(name = "Y series", labels = c("Y2", "Y1"))
p+geom_line(data.frame(clines),mapping=aes(x=Dive,y=thermo_c,color='Temperature'),size=1)+
geom_line(data.frame(clines),mapping=aes(x=Dive,y=fluo_c,color='gray'),size=1,name='Fluorescence')+
geom_line(data.frame(clines),mapping=aes(x=Dive,y=sal_c),size=1,name='Salinity')+
scale_color_discrete(name = "Y series", labels = c("Y2", "Y1"))
p+geom_line(data.frame(clines),mapping=aes(x=Dive,y=thermo_c,color='Temperature'),size=1)+
geom_line(data.frame(clines),mapping=aes(x=Dive,y=fluo_c,color='Fluoresecence'),size=1,name='Fluorescence')+
geom_line(data.frame(clines),mapping=aes(x=Dive,y=sal_c, color='Salinity'),size=1)+
scale_color_discrete(name = "", labels = c("Temperature", "Fluorescence","Salinity"))
p+geom_line(data.frame(clines),mapping=aes(x=Dive,y=thermo_c,color='Temperature'),size=1)+
geom_line(data.frame(clines),mapping=aes(x=Dive,y=fluo_c,color='Fluoresecence'),size=1,name='Fluorescence')+
geom_line(data.frame(clines),mapping=aes(x=Dive,y=sal_c, color='Salinity'),size=1)+
scale_color_manual(values = c(
'Temperature' = 'black',
'Fluorescence' = 'gray',
'Salinity' = 'black'))
p+geom_line(data.frame(clines),mapping=aes(x=Dive,y=thermo_c,color='Temperature'),size=1)+
geom_line(data.frame(clines),mapping=aes(x=Dive,y=fluo_c,color='Fluoresecence'),size=1,name='Fluorescence')+
geom_line(data.frame(clines),mapping=aes(x=Dive,y=sal_c, color='Salinity'),size=1)+
scale_color_manual(values = c(
'Temperature' = 'black',
'Fluorescence' = 'gray',
'Salinity' = 'black'), name='')
?scale_color_manual
p+geom_line(data.frame(clines),mapping=aes(x=Dive,y=thermo_c),size=1,name='Temperature')+
geom_line(data.frame(clines),mapping=aes(x=Dive,y=fluo_c),size=1,name='Fluorescence')+
geom_line(data.frame(clines),mapping=aes(x=Dive,y=sal_c),size=1, name='Salinity')+
scale_color_manual(values = c('Temperature' = 'black',
'Fluorescence' = 'gray',
'Salinity' = 'black'), name='')
p<-ggplot()+geom_tile(data=env, aes(y=Depth_r, x=Dive, fill=temp))+
scale_y_reverse()+theme_classic()+
scale_fill_gradientn(colors=rev(pals::brewer.rdylbu(15)))
p+geom_line(data.frame(clines),mapping=aes(x=Dive,y=thermo_c),size=1,name='Temperature')+
geom_line(data.frame(clines),mapping=aes(x=Dive,y=fluo_c),size=1,name='Fluorescence')+
geom_line(data.frame(clines),mapping=aes(x=Dive,y=sal_c),size=1, name='Salinity')+
scale_color_manual(values = c('Temperature' = 'black',
'Fluorescence' = 'gray',
'Salinity' = 'black'), name='')
p+geom_line(data.frame(clines),mapping=aes(x=Dive,y=thermo_c),size=1,name='Temperature')+
geom_line(data.frame(clines),mapping=aes(x=Dive,y=fluo_c, color='f'),size=1,name='Fluorescence')+
geom_line(data.frame(clines),mapping=aes(x=Dive,y=sal_c),size=1, name='Salinity')+
scale_color_manual(values = c('Temperature' = 'black',
'Fluorescence' = 'gray',
'Salinity' = 'black'), name='')
p+geom_line(data.frame(clines),mapping=aes(x=Dive,y=thermo_c),size=1,name='Temperature')+
geom_line(data.frame(clines),mapping=aes(x=Dive,y=fluo_c, color='Fluorescence'),size=1,name='Fluorescence')+
geom_line(data.frame(clines),mapping=aes(x=Dive,y=sal_c),size=1, name='Salinity')+
scale_color_manual(values = c('Temperature' = 'black',
'Fluorescence' = 'gray',
'Salinity' = 'black'), name='')
p+geom_line(data.frame(clines),mapping=aes(x=Dive,y=thermo_c, color='Temperature'),size=1,name='Temperature')+
geom_line(data.frame(clines),mapping=aes(x=Dive,y=fluo_c, color='Fluorescence'),size=1,name='Fluorescence')+
geom_line(data.frame(clines),mapping=aes(x=Dive,y=sal_c),size=1, name='Salinity')+
scale_color_manual(values = c('Temperature' = 'black',
'Fluorescence' = 'gray',
'Salinity' = 'black'), name='')
p+geom_line(data.frame(clines),mapping=aes(x=Dive,y=thermo_c, color='Temperature'),size=1,name='Temperature')+
geom_line(data.frame(clines),mapping=aes(x=Dive,y=fluo_c, color='Fluorescence'),size=1,name='Fluorescence')+
geom_line(data.frame(clines),mapping=aes(x=Dive,y=sal_c, color='Salinity'),size=1, name='Salinity')+
scale_color_manual(values = c('Temperature' = 'black',
'Fluorescence' = 'gray',
'Salinity' = 'black'), name='')
p+geom_line(data.frame(clines),mapping=aes(x=Dive,y=thermo_c, color='Temperature'),size=1,name='Temperature')+
geom_line(data.frame(clines),mapping=aes(x=Dive,y=fluo_c, color='Fluorescence'),size=1,name='Fluorescence')+
geom_line(data.frame(clines),mapping=aes(x=Dive,y=sal_c, color='Salinity'),size=1)+
scale_color_manual(values = c('Temperature' = 'black',
'Fluorescence' = 'gray',
'Salinity' = 'white'), name='')
p+geom_line(data.frame(clines),mapping=aes(x=Dive,y=thermo_c, color='Temperature'),size=1)+
geom_line(data.frame(clines),mapping=aes(x=Dive,y=fluo_c, color='Fluorescence'),size=1)+
geom_line(data.frame(clines),mapping=aes(x=Dive,y=sal_c, color='Salinity'),size=1)+
scale_color_manual(values = c('Temperature' = 'black',
'Fluorescence' = 'gray',
'Salinity' = 'white'), name='')
p+geom_line(data.frame(clines),mapping=aes(x=Dive,y=thermo_c, color='Temperature'),size=1)+
geom_line(data.frame(clines),mapping=aes(x=Dive,y=fluo_c, color='Fluorescence'),size=1)+
geom_line(data.frame(clines),mapping=aes(x=Dive,y=sal_c, color='Salinity'),size=1)+
scale_color_manual(values = c('Temperature' = 'black',
'Fluorescence' = 'gray',
'Salinity' = 'green'), name='')
p+geom_line(data.frame(clines),mapping=aes(x=Dive,y=thermo_c, color='Temperature'),size=1)+
geom_line(data.frame(clines),mapping=aes(x=Dive,y=fluo_c, color='Fluorescence'),size=1)+
geom_line(data.frame(clines),mapping=aes(x=Dive,y=sal_c, color='Salinity'),size=1)+
scale_color_manual(values = c('Temperature' = 'black',
'Fluorescence' = 'gray',
'Salinity' = 'darkgray'), name='')
p+geom_line(data.frame(clines),mapping=aes(x=Dive,y=thermo_c, color='Temperature'),size=1)+
geom_line(data.frame(clines),mapping=aes(x=Dive,y=fluo_c, color='Fluorescence'),size=1)+
geom_line(data.frame(clines),mapping=aes(x=Dive,y=sal_c, color='Salinity'),size=1)+
scale_color_manual(values = c('Temperature' = 'black',
'Fluorescence' = 'bluegray',
'Salinity' = 'darkgray'), name='')
devtools::build()
devtools::build()
install.packages("~/Zonar/DVM/ZooDVM_0.1.0.tar.gz", repos = NULL, type = "source")
?ZooDVM::anomaly
setwd('C:\\Users\\sven\\Documents\\Zonar\\data\\gray\\')
gray <- read.csv('gray.csv')
gray <- read.csv('LJ.csv')
head(gray)
plot(gray$gray_val)
names(gray)
library(ggplot2)
library(dplyr)
gray$depth_r = round(gray$pressure_dbar)
head(gray$dive_number)
gray$Dive = as.numeric(substr(gray$dive_number, 2:nchar(gray$dive_number)))
gray$Dive
substr(gray$dive_number, 2:nchar(gray$dive_number))
gray$Dive = as.numeric(substr(gray$dive_number, 2,nchar(gray$dive_number)))
gdm = gray %>% group_by(Dive, depth_r)%>%summarise(gray=mean(gray))
head(gdm)
gdm = gray %>% group_by(Dive, depth_r)%>%summarise(gray=mean(na.omit(gray)))
head(gdm)
gdm$gray
gray$depth_r = round(gray$pressure_dbar)
gray$Dive = as.numeric(substr(gray$dive_number, 2,nchar(gray$dive_number)))
gdm = gray %>% group_by(Dive, depth_r)#%>%summarise(gray=mean(na.omit(gray)))
head(gdm)
head(gdm$gray_val)
gdm = gray %>% group_by(Dive, depth_r)%>%summarise(gray=mean(na.omit(gray_val)))
head(gdm)
head(gdm)ggplot(data=gdm, aes(x=Dive, y=depth_r, fill=gray))+geom_tile(na.value='transparent')+scale_y_reverse()
ggplot(data=gdm, aes(x=Dive, y=depth_r, fill=gray))+geom_tile(na.value='transparent')+scale_y_reverse()+theme_classic()+scale_fill_viridis_c()
ggplot(data=gdm, aes(x=Dive, y=depth_r, fill=sqrt(gray)))+geom_tile(na.value='transparent')+scale_y_reverse()+theme_classic()+scale_fill_viridis_c()
ggplot(data=gdm, aes(x=Dive, y=depth_r, fill=log(gray)))+geom_tile(na.value='transparent')+scale_y_reverse()+theme_classic()+scale_fill_viridis_c()
ggplot(data=gdm, aes(x=Dive, y=depth_r, fill=gray-230))+geom_tile(na.value='transparent')+scale_y_reverse()+theme_classic()+scale_fill_viridis_c()
ggplot(data=gdm, aes(x=Dive, y=depth_r, fill=gray))+geom_tile(na.value='transparent')+scale_y_reverse()+theme_classic()+scale_fill_viridis_c()
ggplot(data=gdm, aes(x=Dive, y=depth_r, fill=gray))+geom_tile(na.value='transparent')+
scale_y_reverse()+
theme_classic()+
scale_fill_viridis_c(limits=c(200,250))
ggplot(data=gdm, aes(x=Dive, y=depth_r, fill=gray))+geom_tile(na.value='transparent')+
scale_y_reverse()+
theme_classic()+
scale_fill_viridis_c(limits=c(230,235))
ggplot(data=gdm, aes(x=Dive, y=depth_r, fill=gray))+geom_tile(na.value='transparent')+
scale_y_reverse()+
theme_classic()+
scale_fill_viridis_c(limits=c(232,235))
ggplot(data=gdm, aes(x=Dive, y=depth_r, fill=gray))+geom_tile(na.value='transparent')+
scale_y_reverse()+
theme_classic()+
scale_fill_viridis_c(limits=c(233,240))
ggplot(data=gdm, aes(x=Dive, y=depth_r, fill=gray))+geom_tile(na.value='transparent')+
scale_y_reverse()+
theme_classic()+
scale_fill_viridis_c(limits=c(233,236))
ggplot(data=gdm, aes(x=Dive, y=depth_r, fill=gray))+geom_tile(na.value='transparent')+
scale_y_reverse()+
theme_classic()+
scale_fill_viridis_c(limits=c(232,236))
ggplot(data=gdm, aes(x=Dive, y=depth_r, fill=gray))+geom_tile(na.value='transparent')+
scale_y_reverse()+
theme_classic()+
scale_fill_viridis_c(limits=c(232,236), oobs=scales::squish())
ggplot(data=gdm, aes(x=Dive, y=depth_r, fill=gray))+geom_tile(na.value='transparent')+
scale_y_reverse()+
theme_classic()+
scale_fill_viridis_c(limits=c(232,236), oobs=scales::squish)
ggplot(data=gdm, aes(x=Dive, y=depth_r, fill=gray))+geom_tile(na.value='transparent')+
scale_y_reverse()+
theme_classic()+
scale_fill_viridis_c(limits=c(232,236), oob=scales::squish)
ggplot(data=gdm, aes(x=Dive, y=depth_r, fill=gray))+geom_tile(na.value='blue')+
scale_y_reverse()+
theme_classic()+
scale_fill_viridis_c(limits=c(232,236), oob=scales::squish)
ggplot(data=gdm, aes(x=Dive, y=depth_r, fill=gray))+geom_tile(na.value='blue')+
scale_y_reverse()+
theme_classic()+
scale_fill_viridis_c(limits=c(0,236), oob=scales::squish)
ggplot(data=gdm, aes(x=Dive, y=depth_r, fill=gray))+geom_tile(na.value='transparent')+
scale_y_reverse()+
theme_classic()+
scale_fill_viridis_c(limits=c(232,236), oob=scales::squish)
unique(gdm$Dive)
gdm = gray %>% group_by(Dive, depth_r)%>%summarise(gray=mean(256-na.omit(gray_val)))
ggplot(data=gdm, aes(x=Dive, y=depth_r, fill=gray))+geom_tile(na.value='transparent')+
scale_y_reverse()+
theme_classic()+
scale_fill_viridis_c(limits=c(232,236), oob=scales::squish)
ggplot(data=gdm, aes(x=Dive, y=depth_r, fill=gray))+geom_tile(na.value='transparent')+
scale_y_reverse()+
theme_classic()+
scale_fill_viridis_c(limits=c(0,10), oob=scales::squish)
ggplot(data=gdm, aes(x=Dive, y=depth_r, fill=gray))+geom_tile(na.value='transparent')+
scale_y_reverse()+
theme_classic()+
scale_fill_viridis_c(limits=c(0,30), oob=scales::squish)
ggplot(data=gdm, aes(x=Dive, y=depth_r, fill=gray))+geom_tile(na.value='transparent')+
scale_y_reverse()+
theme_classic()+
scale_fill_viridis_c(limits=c(10,30), oob=scales::squish)
ggplot(data=gdm, aes(x=Dive, y=depth_r, fill=gray))+geom_tile(na.value='transparent')+
scale_y_reverse()+
theme_classic()+
scale_fill_viridis_c(limits=c(10,25), oob=scales::squish)
ggplot(data=gdm, aes(x=Dive, y=depth_r, fill=gray))+geom_tile(na.value='transparent')+
scale_y_reverse()+
theme_classic()+
scale_fill_viridis_c(limits=c(20,25), oob=scales::squish)
ggplot(data=gdm, aes(x=Dive, y=depth_r, fill=gray))+geom_tile(na.value='transparent')+
scale_y_reverse()+
theme_classic()+
scale_fill_gradient(low='white',high='black')
ggplot(data=gdm, aes(x=Dive, y=depth_r, fill=gray))+geom_tile(na.value='transparent')+
scale_y_reverse()+
theme_classic()+
scale_fill_gradient(low='white',high='black',limits=c(20,25))
ggplot(data=gdm, aes(x=Dive, y=depth_r, fill=gray))+geom_tile(na.value='transparent')+
scale_y_reverse()+
theme_classic()+
scale_fill_gradient(low='white',high='black',limits=c(20,25), oob=scales::squish)
ggplot(data=gdm, aes(x=Dive, y=depth_r, fill=gray))+geom_tile(na.value='transparent')+
scale_y_reverse()+
theme_classic()+
scale_fill_gradient(low='white',high='black',limits=c(20,25), oob=scales::squish)+
xlab('Dive #')+ylab('Depth [m]')
ggplot(data=gdm, aes(x=Dive, y=depth_r, fill=gray))+geom_tile(na.value='transparent')+
scale_y_reverse()+
theme_classic()+
scale_fill_gradient(low='white',high='black',limits=c(20,24), oob=scales::squish)+
xlab('Dive #')+ylab('Depth [m]')
gdm = gray %>% group_by(Dive, depth_r)%>%summarise(gray=max(256-na.omit(gray_val)))
ggplot(data=gdm, aes(x=Dive, y=depth_r, fill=gray))+geom_tile(na.value='transparent')+
scale_y_reverse()+
theme_classic()+
scale_fill_gradient(low='white',high='black',limits=c(20,24), oob=scales::squish)+
xlab('Dive #')+ylab('Depth [m]')
gdm = gray %>% group_by(Dive, depth_r)%>%summarise(gray=median(256-na.omit(gray_val)))
ggplot(data=gdm, aes(x=Dive, y=depth_r, fill=gray))+geom_tile(na.value='transparent')+
scale_y_reverse()+
theme_classic()+
scale_fill_gradient(low='white',high='black',limits=c(20,24), oob=scales::squish)+
xlab('Dive #')+ylab('Depth [m]')
ggplot(data=gdm, aes(x=Dive, y=depth_r, fill=gray))+geom_tile(na.value='transparent')+
scale_y_reverse()+
theme_classic()+
scale_fill_gradient(low='white',high='black',limits=c(22,24), oob=scales::squish)+
xlab('Dive #')+ylab('Depth [m]')
ggplot(data=gdm, aes(x=Dive, y=depth_r, fill=gray))+geom_tile(na.value='transparent')+
scale_y_reverse()+
theme_classic()+
scale_fill_gradient(low='white',high='black',limits=c(22,26), oob=scales::squish)+
xlab('Dive #')+ylab('Depth [m]')
ggplot(data=gdm, aes(x=Dive, y=depth_r, fill=gray))+geom_tile(na.value='transparent')+
scale_y_reverse()+
theme_classic()+
scale_fill_gradient(low='white',high='black',limits=c(22,25), oob=scales::squish)+
xlab('Dive #')+ylab('Depth [m]')
230/256
70/256
gdm = gray %>% group_by(Dive, depth_r)%>%summarise(gray=median(na.omit(gray_val)))
ggplot(data=gdm, aes(x=Dive, y=depth_r, fill=gray/256))+geom_tile(na.value='transparent')+
scale_y_reverse()+
theme_classic()+
scale_fill_gradient(low='white',high='black',limits=c(0,1), oob=scales::squish)+
xlab('Dive #')+ylab('Depth [m]')
ggplot(data=gdm, aes(x=Dive, y=depth_r, fill=gray/256))+geom_tile(na.value='transparent')+
scale_y_reverse()+
theme_classic()+
scale_fill_gradient(low='white',high='black',limits=c(0.8,1), oob=scales::squish)+
xlab('Dive #')+ylab('Depth [m]')
ggplot(data=gdm, aes(x=Dive, y=depth_r, fill=gray/256))+geom_tile(na.value='transparent')+
scale_y_reverse()+
theme_classic()+
scale_fill_gradient(low='white',high='black',limits=c(0.9,1), oob=scales::squish)+
xlab('Dive #')+ylab('Depth [m]')
ggplot(data=gdm, aes(x=Dive, y=depth_r, fill=gray))+geom_tile(na.value='transparent')+
scale_y_reverse()+
theme_classic()+
scale_fill_gradient(low='white',high='black',limits=c(21,26), oob=scales::squish)+
xlab('Dive #')+ylab('Depth [m]')
ggplot(data=gdm, aes(x=Dive, y=depth_r, fill=gray))+geom_tile(na.value='transparent')+
scale_y_reverse()+
theme_classic()+
scale_fill_gradient(low='white',high='black',limits=c(231,236), oob=scales::squish)+
xlab('Dive #')+ylab('Depth [m]')
ggplot(data=gdm, aes(x=Dive, y=depth_r, fill=gray))+geom_tile(na.value='transparent')+
scale_y_reverse()+
theme_classic()+
scale_fill_gradient(low='white',high='black',limits=c(232,236), oob=scales::squish)+
xlab('Dive #')+ylab('Depth [m]')
ggplot(data=gdm, aes(x=Dive, y=depth_r, fill=gray-256))+geom_tile(na.value='transparent')+
scale_y_reverse()+
theme_classic()+
scale_fill_gradient(low='white',high='black',limits=c(21,26), oob=scales::squish)+
xlab('Dive #')+ylab('Depth [m]')
ggplot(data=gdm, aes(x=Dive, y=depth_r, fill=gray-256))+geom_tile(na.value='transparent')+
scale_y_reverse()+
theme_classic()+
scale_fill_gradient(low='white',high='black',limits=c(20,26), oob=scales::squish)+
xlab('Dive #')+ylab('Depth [m]')
ggplot(data=gdm, aes(x=Dive, y=depth_r, fill=gray-256))+geom_tile(na.value='transparent')+
scale_y_reverse()+
theme_classic()+
scale_fill_gradient(low='white',high='black',limits=c(0,26), oob=scales::squish)+
xlab('Dive #')+ylab('Depth [m]')
ggplot(data=gdm, aes(x=Dive, y=depth_r, fill=256-gray))+geom_tile(na.value='transparent')+
scale_y_reverse()+
theme_classic()+
scale_fill_gradient(low='white',high='black',limits=c(0,26), oob=scales::squish)+
xlab('Dive #')+ylab('Depth [m]')
ggplot(data=gdm, aes(x=Dive, y=depth_r, fill=256-gray))+geom_tile(na.value='transparent')+
scale_y_reverse()+
theme_classic()+
scale_fill_gradient(low='white',high='black',limits=c(21,26), oob=scales::squish)+
xlab('Dive #')+ylab('Depth [m]')
ggplot(data=gdm, aes(x=Dive, y=depth_r, fill=256-gray))+geom_tile(na.value='transparent')+
scale_y_reverse()+
theme_classic()+
scale_fill_gradient(low='white',high='black',limits=c(22,26), oob=scales::squish)+
xlab('Dive #')+ylab('Depth [m]')
ggplot(data=gdm, aes(x=Dive, y=depth_r, fill=256-gray))+geom_tile(na.value='transparent')+
scale_y_reverse()+
theme_classic()+
scale_fill_gradientn(colors=rdylbu(15))
ggplot(data=gdm, aes(x=Dive, y=depth_r, fill=256-gray))+geom_tile(na.value='transparent')+
scale_y_reverse()+
theme_classic()+
scale_fill_gradientn(colors=pals::brewer.rdylbu(15))
ggplot(data=gdm, aes(x=Dive, y=depth_r, fill=256-gray))+geom_tile(na.value='transparent')+
scale_y_reverse()+
theme_classic()+
scale_fill_gradientn(colors=pals::brewer.rdylbu(15),limits=c(22,26), oob=scales::squish)
ggplot(data=gdm, aes(x=Dive, y=depth_r, fill=256-gray))+geom_tile(na.value='transparent')+
scale_y_reverse()+
theme_classic()+
scale_fill_gradientn(colors=rev(pals::brewer.rdylbu(15)),limits=c(22,26), oob=scales::squish)
ggplot(data=gdm, aes(x=Dive, y=depth_r, fill=256-gray))+geom_tile(na.value='transparent')+
scale_y_reverse()+
theme_classic()+
scale_fill_gradientn(colors=rev(pals::brewer.rdylbu(15)),limits=c(22,24), oob=scales::squish)
ggplot(data=gdm, aes(x=Dive, y=depth_r, fill=256-gray))+geom_tile(na.value='transparent')+
scale_y_reverse()+
theme_classic()+
scale_fill_gradientn(colors=rev(pals::brewer.rdylbu(15)),limits=c(21,24), oob=scales::squish)
ggplot(data=gdm, aes(x=Dive, y=depth_r, fill=256-gray))+geom_tile(na.value='transparent')+
scale_y_reverse()+
theme_classic()+
scale_fill_gradientn(colors=rev(pals::brewer.rdylbu(15)),limits=c(21,24), oob=scales::squish)+
#scale_fill_gradient(low='white',high='black',limits=c(22,26), oob=scales::squish)+
xlab('Dive #')+ylab('Depth [m]')
res=5
gray$depth_r = round(gray$pressure_dbar/res)*res
gray$Dive = as.numeric(substr(gray$dive_number, 2,nchar(gray$dive_number)))
gdm = gray %>% group_by(Dive, depth_r)%>%summarise(gray=median(na.omit(gray_val)))
ggplot(data=gdm, aes(x=Dive, y=depth_r, fill=256-gray))+geom_tile(na.value='transparent')+
scale_y_reverse()+
theme_classic()+
scale_fill_gradientn(colors=rev(pals::brewer.rdylbu(15)),limits=c(21,24), oob=scales::squish)+
#scale_fill_gradient(low='white',high='black',limits=c(22,26), oob=scales::squish)+
xlab('Dive #')+ylab('Depth [m]')
res=.5
gray$depth_r = round(gray$pressure_dbar/res)*res
gray$Dive = as.numeric(substr(gray$dive_number, 2,nchar(gray$dive_number)))
gdm = gray %>% group_by(Dive, depth_r)%>%summarise(gray=median(na.omit(gray_val)))
ggplot(data=gdm, aes(x=Dive, y=depth_r, fill=256-gray))+geom_tile(na.value='transparent')+
scale_y_reverse()+
theme_classic()+
scale_fill_gradientn(colors=rev(pals::brewer.rdylbu(15)),limits=c(21,24), oob=scales::squish)+
#scale_fill_gradient(low='white',high='black',limits=c(22,26), oob=scales::squish)+
xlab('Dive #')+ylab('Depth [m]')
miss.bath <- getNOAA.bathy(lon1 = (min(gps$Lon)-0.1), lon2 = ceiling(max(gps$Lon)+0.1),
lat1 = floor(min(gps$Lat)-0.1), lat2 = ceiling(max(gps$Lat)+0.1))
gps
library(marmap)
miss.bath <- getNOAA.bathy(lon1 = (min(gps$Lon)-0.1), lon2 = ceiling(max(gps$Lon)+0.1),
lat1 = floor(min(gps$Lat)-0.1), lat2 = ceiling(max(gps$Lat)+0.1))
p <- autoplot(miss.bath, geom = c("raster","contour"), colour = "white", interpolate=TRUE) +
scale_fill_gradientn(name='',
values = scales::rescale(c(min(fortify.bathy(miss.bath)$z),
-.1, 0, max(fortify.bathy(miss.bath)$z))),
colors = c("steelblue4", "#C7E0FF", "grey50", "grey80"))+
geom_line(data=gps,aes(x=Lon, y=Lat),col='gray')+
ylab('Latitude')+xlab('Longitude')+
theme_classic()+
theme(text=element_text(size=16),
axis.text.x=element_text(angle=75,hjust=0, vjust=0),
legend.text = element_text(size=10))
p
update.packages(c('rgdal','raster'))
update.packages(c('rgdal','raster','marmap'))
update.packages('rgdal')
p <- autoplot(miss.bath, geom = c("raster","contour"), colour = "white", interpolate=TRUE) +
scale_fill_gradientn(name='',
values = scales::rescale(c(min(fortify.bathy(miss.bath)$z),
-.1, 0, max(fortify.bathy(miss.bath)$z))),
colors = c("steelblue4", "#C7E0FF", "grey50", "grey80"))+
geom_line(data=gps,aes(x=Lon, y=Lat),col='gray')+
ylab('Latitude')+xlab('Longitude')+
theme_classic()+
theme(text=element_text(size=16),
axis.text.x=element_text(angle=75,hjust=0, vjust=0),
legend.text = element_text(size=10))
if (bathy){
miss.bath <- getNOAA.bathy(lon1 = (min(gps$Lon)-0.1), lon2 = ceiling(max(gps$Lon)+0.1),
lat1 = floor(min(gps$Lat)-0.1), lat2 = ceiling(max(gps$Lat)+0.1))
p <- autoplot(miss.bath, geom = c("raster","contour"), colour = "white", interpolate=TRUE) +
scale_fill_gradientn(name='',
values = scales::rescale(c(min(fortify.bathy(miss.bath)$z),
-.1, 0, max(fortify.bathy(miss.bath)$z))),
colors = c("steelblue4", "#C7E0FF", "grey50", "grey80"))+
geom_line(data=gps,aes(x=Lon, y=Lat),col='gray')+
ylab('Latitude')+xlab('Longitude')+
theme_classic()+
theme(text=element_text(size=16),
axis.text.x=element_text(angle=75,hjust=0, vjust=0),
legend.text = element_text(size=10))
}else{
p <- ggplot(data=gps,aes(x=Lon, y=Lat, group=Dive),col='gray')+geom_line()+
#scale_x_continuous(limits=c(min(gps$Lon)-0.1, max(gps$Lon)+0.1))+
#scale_y_continuous(limits=c(min(gps$Lat)-0.1, max(gps$Lat)+0.1), expand=c(0,0))+
ylab('Latitude')+xlab('Longitude')+
theme_classic()+
theme(text=element_text(size=16),
axis.text.x=element_text(angle=75,hjust=0, vjust=0),
legend.text = element_text(size=10))
}
bathy=TRUE
miss.bath <- getNOAA.bathy(lon1 = (min(gps$Lon)-0.1), lon2 = ceiling(max(gps$Lon)+0.1),
lat1 = floor(min(gps$Lat)-0.1), lat2 = ceiling(max(gps$Lat)+0.1))
p <- autoplot(miss.bath, geom = c("raster","contour"), colour = "white", interpolate=TRUE) +
scale_fill_gradientn(name='',
values = scales::rescale(c(min(fortify.bathy(miss.bath)$z),
-.1, 0, max(fortify.bathy(miss.bath)$z))),
colors = c("steelblue4", "#C7E0FF", "grey50", "grey80"))+
geom_line(data=gps,aes(x=Lon, y=Lat),col='gray')+
ylab('Latitude')+xlab('Longitude')+
theme_classic()+
theme(text=element_text(size=16),
axis.text.x=element_text(angle=75,hjust=0, vjust=0),
legend.text = element_text(size=10))
p
dvm_app()
dvm_app(path=path)
library(ZooDVM)
path
roxygen2::roxygenize()
getwd()
setwd("C:\\Users\\sven\\Documents\\Zonar\\DVM\\")
roxygen2::roxygenize()
ls
ls()
setwd("C:\\Users\\sven\\Documents\\Zonar\\DVM\\R")
setwd("C:\\Users\\sven\\Documents\\Zonar\\DVM\\ZooDVM/")
roxygen2::roxygenize()
warnings()
devtools::build()
roxygen2::roxygenise()
roxygen2::roxygenize()
setwd('C:\\Users\\sven\\Documents\\Zonar\\data\\gray\\')
gray <- read.csv('LJ.csv')
library(ggplot2)
library(dplyr)
res=.5
gray$depth_r = round(gray$pressure_dbar/res)*res
gray$Dive = as.numeric(substr(gray$dive_number, 2,nchar(gray$dive_number)))
gdm = gray %>% group_by(Dive, depth_r)%>%summarise(gray=median(na.omit(gray_val)))
ggplot(data=gdm, aes(x=Dive, y=depth_r, fill=256-gray))+geom_tile(na.value='transparent')+
scale_y_reverse()+
theme_classic()+
scale_fill_gradientn(colors=rev(pals::brewer.rdylbu(15)),limits=c(21,24), oob=scales::squish)+
#scale_fill_gradient(low='white',high='black',limits=c(22,26), oob=scales::squish)+
xlab('Dive #')+ylab('Depth [m]')
setwd('C:\\Users\\sven\\Documents\\Zonar\\data\\gray\\')
gray <- read.csv('LJ2.csv')
library(ggplot2)
library(dplyr)
res=.5
gray$depth_r = round(gray$pressure_dbar/res)*res
gray$Dive = as.numeric(substr(gray$dive_number, 2,nchar(gray$dive_number)))
gdm = gray %>% group_by(Dive, depth_r)%>%summarise(gray=median(na.omit(gray_val)))
ggplot(data=gdm, aes(x=Dive, y=depth_r, fill=256-gray))+geom_tile(na.value='transparent')+
scale_y_reverse()+
theme_classic()+
scale_fill_gradientn(colors=rev(pals::brewer.rdylbu(15)),limits=c(21,24), oob=scales::squish)+
#scale_fill_gradient(low='white',high='black',limits=c(22,26), oob=scales::squish)+
xlab('Dive #')+ylab('Depth [m]')
gdm = gray %>% group_by(Dive, depth_r)%>%summarise(gray=max(na.omit(gray_val)))
ggplot(data=gdm, aes(x=Dive, y=depth_r, fill=256-gray))+geom_tile(na.value='transparent')+
scale_y_reverse()+
theme_classic()+
scale_fill_gradientn(colors=rev(pals::brewer.rdylbu(15)),limits=c(21,24), oob=scales::squish)+
#scale_fill_gradient(low='white',high='black',limits=c(22,26), oob=scales::squish)+
xlab('Dive #')+ylab('Depth [m]')
library(plotly)
p<-ggplot(data=gdm, aes(x=Dive, y=depth_r, fill=256-gray))+geom_tile(na.value='transparent')+
scale_y_reverse()+
theme_classic()+
scale_fill_gradientn(colors=rev(pals::brewer.rdylbu(15)),limits=c(21,24), oob=scales::squish)+
#scale_fill_gradient(low='white',high='black',limits=c(22,26), oob=scales::squish)+
xlab('Dive #')+ylab('Depth [m]')
library(plotly)
ggplotly(p)
gdm = gray %>% group_by(Dive, depth_r)%>%summarise(gray=median(na.omit(gray_val)))
p<-ggplot(data=gdm, aes(x=Dive, y=depth_r, fill=256-gray))+geom_tile(na.value='transparent')+
scale_y_reverse()+
theme_classic()+
scale_fill_gradientn(colors=rev(pals::brewer.rdylbu(15)),limits=c(21,24), oob=scales::squish)+
#scale_fill_gradient(low='white',high='black',limits=c(22,26), oob=scales::squish)+
xlab('Dive #')+ylab('Depth [m]')
ggplotly(p)
ZooDVM::dvm_app()
path
ZooDVM::dvm_app(path)

scale_fill_gradientn(colors=rev(pals::brewer.rdylbu(15)))
p+geom_line(data.frame(a),mapping=aes(x=Dive,y=tt),size=1)+
geom_line(data.frame(a),mapping=aes(x=Dive,y=f),size=1,color='grey')+
geom_line(data.frame(a),mapping=aes(x=Dive,y=s),size=1,color='white')
a=env[env$Depth>1,] %>%
group_by(Dive) %>%
summarise(#ff=fluodet(temp,Depth, r=10,.5),
tt=mldthermocline(temp,Depth, tmax=NULL),
f=mldthermocline(fluo,Depth, tmax=500, tmin=10,r=5),
s=mldthermocline(sal,Depth,r=5, cw='cw'))
p<-ggplot()+geom_tile(data=env, aes(y=Depth_r, x=Dive, fill=sal))+
scale_y_reverse()+theme_classic()+
scale_fill_gradientn(colors=rev(pals::brewer.rdylbu(15)))
p+geom_line(data.frame(a),mapping=aes(x=Dive,y=tt),size=1)+
geom_line(data.frame(a),mapping=aes(x=Dive,y=f),size=1,color='grey')+
geom_line(data.frame(a),mapping=aes(x=Dive,y=s),size=1,color='white')
a=env[env$Depth>1,] %>%
group_by(Dive) %>%
summarise(#ff=fluodet(temp,Depth, r=10,.5),
tt=mldthermocline(temp,Depth, tmax=NULL),
f=mldthermocline(fluo,Depth, tmax=500, tmin=10,r=5),
s=mldthermocline(sal,Depth,r=20, cw='cw'))
p<-ggplot()+geom_tile(data=env, aes(y=Depth_r, x=Dive, fill=sal))+
scale_y_reverse()+theme_classic()+
scale_fill_gradientn(colors=rev(pals::brewer.rdylbu(15)))
p+geom_line(data.frame(a),mapping=aes(x=Dive,y=tt),size=1)+
geom_line(data.frame(a),mapping=aes(x=Dive,y=f),size=1,color='grey')+
geom_line(data.frame(a),mapping=aes(x=Dive,y=s),size=1,color='white')
a=env[env$Depth>1,] %>%
group_by(Dive) %>%
summarise(#ff=fluodet(temp,Depth, r=10,.5),
tt=mldthermocline(temp,Depth, tmax=NULL),
f=mldthermocline(fluo,Depth, tmax=500, tmin=10,r=5),
s=mldthermocline(sal,Depth,r=10, cw='cw'))
p<-ggplot()+geom_tile(data=env, aes(y=Depth_r, x=Dive, fill=sal))+
scale_y_reverse()+theme_classic()+
scale_fill_gradientn(colors=rev(pals::brewer.rdylbu(15)))
p+geom_line(data.frame(a),mapping=aes(x=Dive,y=tt),size=1)+
geom_line(data.frame(a),mapping=aes(x=Dive,y=f),size=1,color='grey')+
geom_line(data.frame(a),mapping=aes(x=Dive,y=s),size=1,color='white')
a=env[env$Depth>1,] %>%
group_by(Dive) %>%
summarise(#ff=fluodet(temp,Depth, r=10,.5),
tt=mldthermocline(temp,Depth, tmax=NULL),
f=mldthermocline(fluo,Depth, tmax=500, tmin=10,r=5),
s=mldthermocline(sal,Depth,r=1, cw='cw'))
p<-ggplot()+geom_tile(data=env, aes(y=Depth_r, x=Dive, fill=sal))+
scale_y_reverse()+theme_classic()+
scale_fill_gradientn(colors=rev(pals::brewer.rdylbu(15)))
p+geom_line(data.frame(a),mapping=aes(x=Dive,y=tt),size=1)+
geom_line(data.frame(a),mapping=aes(x=Dive,y=f),size=1,color='grey')+
geom_line(data.frame(a),mapping=aes(x=Dive,y=s),size=1,color='white')
a=env[env$Depth>1,] %>%
group_by(Dive) %>%
summarise(#ff=fluodet(temp,Depth, r=10,.5),
tt=mldthermocline(temp,Depth, tmax=NULL),
f=mldthermocline(fluo,Depth, tmax=500, tmin=10,r=5),
s=mldthermocline(sal,Depth,r=2, cw='cw'))
p<-ggplot()+geom_tile(data=env, aes(y=Depth_r, x=Dive, fill=sal))+
scale_y_reverse()+theme_classic()+
scale_fill_gradientn(colors=rev(pals::brewer.rdylbu(15)))
p+geom_line(data.frame(a),mapping=aes(x=Dive,y=tt),size=1)+
geom_line(data.frame(a),mapping=aes(x=Dive,y=f),size=1,color='grey')+
geom_line(data.frame(a),mapping=aes(x=Dive,y=s),size=1,color='white')
a=env[env$Depth>1,] %>%
group_by(Dive) %>%
summarise(#ff=fluodet(temp,Depth, r=10,.5),
tt=mldthermocline(temp,Depth, tmax=NULL),
f=mldthermocline(fluo,Depth, tmax=500, tmin=10,r=5),
s=mldthermocline(sal,Depth,r=20, cw='cw'))
p<-ggplot()+geom_tile(data=env, aes(y=Depth_r, x=Dive, fill=sal))+
scale_y_reverse()+theme_classic()+
scale_fill_gradientn(colors=rev(pals::brewer.rdylbu(15)))
p+geom_line(data.frame(a),mapping=aes(x=Dive,y=tt),size=1)+
geom_line(data.frame(a),mapping=aes(x=Dive,y=f),size=1,color='grey')+
geom_line(data.frame(a),mapping=aes(x=Dive,y=s),size=1,color='white')
a=env[env$Depth>1,] %>%
group_by(Dive) %>%
summarise(#ff=fluodet(temp,Depth, r=10,.5),
tt=mldthermocline(temp,Depth, tmax=NULL),
f=mldthermocline(fluo,Depth, tmax=500, tmin=10,r=5),
s=mldthermocline(sal,Depth,r=20,tmin=33.5, cw='cw'))
p<-ggplot()+geom_tile(data=env, aes(y=Depth_r, x=Dive, fill=sal))+
scale_y_reverse()+theme_classic()+
scale_fill_gradientn(colors=rev(pals::brewer.rdylbu(15)))
p+geom_line(data.frame(a),mapping=aes(x=Dive,y=tt),size=1)+
geom_line(data.frame(a),mapping=aes(x=Dive,y=f),size=1,color='grey')+
geom_line(data.frame(a),mapping=aes(x=Dive,y=s),size=1,color='white')
a=env[env$Depth>1,] %>%
group_by(Dive) %>%
summarise(#ff=fluodet(temp,Depth, r=10,.5),
tt=mldthermocline(temp,Depth, tmax=NULL),
f=mldthermocline(fluo,Depth, tmax=500, tmin=10,r=5),
s=mldthermocline(sal,Depth,r=20,tmin=33.5, cw='w'))
p<-ggplot()+geom_tile(data=env, aes(y=Depth_r, x=Dive, fill=sal))+
scale_y_reverse()+theme_classic()+
scale_fill_gradientn(colors=rev(pals::brewer.rdylbu(15)))
p+geom_line(data.frame(a),mapping=aes(x=Dive,y=tt),size=1)+
geom_line(data.frame(a),mapping=aes(x=Dive,y=f),size=1,color='grey')+
geom_line(data.frame(a),mapping=aes(x=Dive,y=s),size=1,color='white')
a=env[env$Depth>1,] %>%
group_by(Dive) %>%
summarise(#ff=fluodet(temp,Depth, r=10,.5),
tt=mldthermocline(temp,Depth, tmax=NULL),
f=mldthermocline(fluo,Depth, tmax=500, tmin=10,r=5),
s=mldthermocline(sal,Depth,r=20,tmin=33.5, cw='w'))
head(a)
a=env[env$Depth>1,] %>%
group_by(Dive) %>%
summarise(#ff=fluodet(temp,Depth, r=10,.5),
tt=mldthermocline(temp,Depth, tmax=NULL),
f=mldthermocline(fluo,Depth, tmax=500, tmin=10,r=5),
s=mldthermocline(sal,Depth,r=20,tmin=33, tmax=34, cw='w'))
head(a)
p<-ggplot()+geom_tile(data=env, aes(y=Depth_r, x=Dive, fill=sal))+
scale_y_reverse()+theme_classic()+
scale_fill_gradientn(colors=rev(pals::brewer.rdylbu(15)))
p+geom_line(data.frame(a),mapping=aes(x=Dive,y=tt),size=1)+
geom_line(data.frame(a),mapping=aes(x=Dive,y=f),size=1,color='grey')+
geom_line(data.frame(a),mapping=aes(x=Dive,y=s),size=1,color='white')
a=env[env$Depth>1,] %>%
group_by(Dive) %>%
summarise(#ff=fluodet(temp,Depth, r=10,.5),
tt=mldthermocline(temp,Depth, tmax=NULL),
f=mldthermocline(fluo,Depth, tmax=500, tmin=10,r=5),
s=mldthermocline(sal,Depth,r=20,tmin=33.4, tmax=34, cw='w'))
head(a)
p<-ggplot()+geom_tile(data=env, aes(y=Depth_r, x=Dive, fill=sal))+
scale_y_reverse()+theme_classic()+
scale_fill_gradientn(colors=rev(pals::brewer.rdylbu(15)))
p+geom_line(data.frame(a),mapping=aes(x=Dive,y=tt),size=1)+
geom_line(data.frame(a),mapping=aes(x=Dive,y=f),size=1,color='grey')+
geom_line(data.frame(a),mapping=aes(x=Dive,y=s),size=1,color='white')
a=env[env$Depth>1,] %>%
group_by(Dive) %>%
summarise(#ff=fluodet(temp,Depth, r=10,.5),
tt=mldthermocline(temp,Depth, tmax=NULL),
f=mldthermocline(fluo,Depth, tmax=500, tmin=10,r=5),
s=mldthermocline(sal,Depth,r=20,tmin=33.4, tmax=33.7, cw='w'))
head(a)
p<-ggplot()+geom_tile(data=env, aes(y=Depth_r, x=Dive, fill=sal))+
scale_y_reverse()+theme_classic()+
scale_fill_gradientn(colors=rev(pals::brewer.rdylbu(15)))
p+geom_line(data.frame(a),mapping=aes(x=Dive,y=tt),size=1)+
geom_line(data.frame(a),mapping=aes(x=Dive,y=f),size=1,color='grey')+
geom_line(data.frame(a),mapping=aes(x=Dive,y=s),size=1,color='white')
a=env[env$Depth>1,] %>%
group_by(Dive) %>%
summarise(#ff=fluodet(temp,Depth, r=10,.5),
tt=mldthermocline(temp,Depth, tmax=NULL),
f=mldthermocline(fluo,Depth, tmax=500, tmin=10,r=5),
s=mldthermocline(sal,Depth,r=1,tmin=33.4, tmax=33.7, cw='w'))
head(a)
p<-ggplot()+geom_tile(data=env, aes(y=Depth_r, x=Dive, fill=sal))+
scale_y_reverse()+theme_classic()+
scale_fill_gradientn(colors=rev(pals::brewer.rdylbu(15)))
p+geom_line(data.frame(a),mapping=aes(x=Dive,y=tt),size=1)+
geom_line(data.frame(a),mapping=aes(x=Dive,y=f),size=1,color='grey')+
geom_line(data.frame(a),mapping=aes(x=Dive,y=s),size=1,color='white')
a=env[env$Depth>1,] %>%
group_by(Dive) %>%
summarise(#ff=fluodet(temp,Depth, r=10,.5),
tt=mldthermocline(temp,Depth, tmax=NULL),
f=mldthermocline(fluo,Depth, tmax=500, tmin=10,r=5),
s=mldthermocline(sal,Depth,r=1,tmin=33.5, tmax=34.5, cw='w'))
head(a)
p<-ggplot()+geom_tile(data=env, aes(y=Depth_r, x=Dive, fill=sal))+
scale_y_reverse()+theme_classic()+
scale_fill_gradientn(colors=rev(pals::brewer.rdylbu(15)))
p+geom_line(data.frame(a),mapping=aes(x=Dive,y=tt),size=1)+
geom_line(data.frame(a),mapping=aes(x=Dive,y=f),size=1,color='grey')+
geom_line(data.frame(a),mapping=aes(x=Dive,y=s),size=1,color='white')
a=env[env$Depth>1,] %>%
group_by(Dive) %>%
summarise(#ff=fluodet(temp,Depth, r=10,.5),
tt=mldthermocline(temp,Depth, tmax=NULL),
f=mldthermocline(fluo,Depth, tmax=500, tmin=10,r=5),
s=mldthermocline(sal,Depth,r=1,tmin=33.4, tmax=34.5, cw='w'))
head(a)
p<-ggplot()+geom_tile(data=env, aes(y=Depth_r, x=Dive, fill=sal))+
scale_y_reverse()+theme_classic()+
scale_fill_gradientn(colors=rev(pals::brewer.rdylbu(15)))
p+geom_line(data.frame(a),mapping=aes(x=Dive,y=tt),size=1)+
geom_line(data.frame(a),mapping=aes(x=Dive,y=f),size=1,color='grey')+
geom_line(data.frame(a),mapping=aes(x=Dive,y=s),size=1,color='white')
a=env[env$Depth>1,] %>%
group_by(Dive) %>%
summarise(#ff=fluodet(temp,Depth, r=10,.5),
tt=mldthermocline(temp,Depth, tmax=NULL),
f=mldthermocline(fluo,Depth, tmax=500, tmin=10,r=5),
s=mldthermocline(sal,Depth,r=5,tmin=33.4, tmax=34.5, cw='w'))
head(a)
p<-ggplot()+geom_tile(data=env, aes(y=Depth_r, x=Dive, fill=sal))+
scale_y_reverse()+theme_classic()+
scale_fill_gradientn(colors=rev(pals::brewer.rdylbu(15)))
p+geom_line(data.frame(a),mapping=aes(x=Dive,y=tt),size=1)+
geom_line(data.frame(a),mapping=aes(x=Dive,y=f),size=1,color='grey')+
geom_line(data.frame(a),mapping=aes(x=Dive,y=s),size=1,color='white')
a=env[env$Depth>1,] %>%
group_by(Dive) %>%
summarise(#ff=fluodet(temp,Depth, r=10,.5),
tt=mldthermocline(temp,Depth, tmax=NULL),
f=mldthermocline(fluo,Depth, tmax=500, tmin=10,r=5),
s=mldthermocline(sal,Depth,r=5,tmin=33.4, tmax=34.2, cw='w'))
head(a)
p<-ggplot()+geom_tile(data=env, aes(y=Depth_r, x=Dive, fill=sal))+
scale_y_reverse()+theme_classic()+
scale_fill_gradientn(colors=rev(pals::brewer.rdylbu(15)))
p+geom_line(data.frame(a),mapping=aes(x=Dive,y=tt),size=1)+
geom_line(data.frame(a),mapping=aes(x=Dive,y=f),size=1,color='grey')+
geom_line(data.frame(a),mapping=aes(x=Dive,y=s),size=1,color='white')
a=env[env$Depth>1,] %>%
group_by(Dive) %>%
summarise(#ff=fluodet(temp,Depth, r=10,.5),
tt=mldthermocline(temp,Depth, tmax=NULL),
f=mldthermocline(fluo,Depth, tmax=500, tmin=10,r=5),
s=mldthermocline(sal,Depth,r=5,tmin=33.4, tmax=34, cw='w'))
head(a)
p<-ggplot()+geom_tile(data=env, aes(y=Depth_r, x=Dive, fill=sal))+
scale_y_reverse()+theme_classic()+
scale_fill_gradientn(colors=rev(pals::brewer.rdylbu(15)))
p+geom_line(data.frame(a),mapping=aes(x=Dive,y=tt),size=1)+
geom_line(data.frame(a),mapping=aes(x=Dive,y=f),size=1,color='grey')+
geom_line(data.frame(a),mapping=aes(x=Dive,y=s),size=1,color='white')
Sv$plots$`1000kHz`
Sv$plots$`200kHz`
mldthermocline = function(temps, depths, tmax=NULL, tmin=NULL, pac=0.05, r=1, cw='c', dmax=NULL, dmin=NULL){
#set tmax
if(!is.null(tmax)){temps[temps>=tmax] = tmax}
if(!is.null(tmin)){temps[temps<=tmin] = tmin}
if(!is.null(dmax)){
depths = depths[depths<=dmax]
temps=temps[depths<=dmax]
}
if(!is.null(dmin)){
depths = depths[depths>=dmin]
temps=temps[depths>=dmin]
}else{dmin=0}
#Get slopes
slopes = diff(zoo::rollmedian(temps,r))/diff(zoo::rollmedian(depths,r))
#Absolute value these slopes to allow for
#inverted profiles (warmer depths and cooler shallows)
if(cw=='c'){
slopes[slopes>0] = 0
}else{
if(cw=='w'){
slopes[slopes<0] = 0
}
}
slopes <- abs(slopes)
inds <- which(slopes < (max(slopes)*(1+pac)) & slopes > (max(slopes)*(1-pac)))
if(length(inds)>0){
return(zoo::rollmedian(depths,r)[inds[1]])
}else{
return(dmin)
}
}
env = get_env(ncpath, mission=sel)
a=env[env$Depth>1,] %>%
group_by(Dive) %>%
summarise(#ff=fluodet(temp,Depth, r=10,.5),
tt=mldthermocline(temp,Depth, tmax=NULL),
f=mldthermocline(fluo,Depth, tmax=500, tmin=10,r=5),
s=mldthermocline(sal,Depth,r=5,tmin=33.4, tmax=34, cw='w'))
head(a)
p<-ggplot()+geom_tile(data=env, aes(y=Depth_r, x=Dive, fill=sal))+
scale_y_reverse()+theme_classic()+
scale_fill_gradientn(colors=rev(pals::brewer.rdylbu(15)))
p+geom_line(data.frame(a),mapping=aes(x=Dive,y=tt),size=1)+
geom_line(data.frame(a),mapping=aes(x=Dive,y=f),size=1,color='grey')+
geom_line(data.frame(a),mapping=aes(x=Dive,y=s),size=1,color='white')
p<-ggplot()+geom_tile(data=env, aes(y=Depth_r, x=Dive, fill=temp))+
scale_y_reverse()+theme_classic()+
scale_fill_gradientn(colors=rev(pals::brewer.rdylbu(15)))
p+geom_line(data.frame(a),mapping=aes(x=Dive,y=tt),size=1)+
geom_line(data.frame(a),mapping=aes(x=Dive,y=f),size=1,color='grey')+
geom_line(data.frame(a),mapping=aes(x=Dive,y=s),size=1,color='white')
p<-ggplot()+geom_tile(data=env, aes(y=Depth_r, x=Dive, fill=fluo))+
scale_y_reverse()+theme_classic()+
scale_fill_gradientn(colors=rev(pals::brewer.rdylbu(15)))
p+geom_line(data.frame(a),mapping=aes(x=Dive,y=tt),size=1)+
geom_line(data.frame(a),mapping=aes(x=Dive,y=f),size=1,color='grey')+
geom_line(data.frame(a),mapping=aes(x=Dive,y=s),size=1,color='white')
1
roxygen2::roxygenise()
?thermocline
roxygen2::roxygenise()
?thermocline
roxygen2::roxygenise()
?thermocline
roxygen2::roxygenise()
?thermocline
roxygen2::roxygenise()
?thermocline
roxygen2::roxygenise()
?thermocline
roxygen2::roxygenise()
?thermocline
roxygen2::roxygenise()
roxygen2::roxygenise()
?thermocline
roxygen2::roxygenise()
?thermocline
roxygen2::roxygenise()
?thermocline
roxygen2::roxygenise()
?thermocline
roxygen2::roxygenise()
?thermocline
roxygen2::roxygenise()
?thermocline
roxygen2::roxygenise()
?thermocline
roxygen2::roxygenise()
?thermocline
roxygen2::roxygenise()
?thermocline
roxygen2::roxygenise()
?thermocline
roxygen2::roxygenise()
?thermocline
roxygen2::roxygenise()
?thermocline
roxygen2::roxygenise()
?thermocline
env = get_env(ncpath, mission=sel)
clines=env %>%
group_by(Dive) %>%
summarise(thermo_c=mldthermocline(temp,Depth, tmax=NULL),
fluo_c=mldthermocline(fluo,Depth, tmax=500, tmin=10,r=5),
sal_c=mldthermocline(sal,Depth,r=5,tmin=33.4, tmax=34, cw='w'))
plot_env(env)
clines
p+geom_line(data=clines, aes(x=Dive, y=thermo_c))
p<- plot_env(env, var='temp')
p+geom_line(data=clines, aes(x=Dive, y=thermo_c))
p<- plot_env(env, var='temp')
p
p[0]+geom_line(data=clines, aes(x=Dive, y=thermo_c))
p[0]
p<- plot_env(env, var='temp')
p
p+geom_line(data=clines, aes(x=Dive, y=thermo_c))
clines
p+geom_line(data=clines, mapping=aes(x=Dive, y=thermo_c))
p<-ggplot()+geom_tile(data=env, aes(y=Depth_r, x=Dive, fill=fluo))+
scale_y_reverse()+theme_classic()+
scale_fill_gradientn(colors=rev(pals::brewer.rdylbu(15)))
p+geom_line(data.frame(clines),mapping=aes(x=Dive,y=temp_c),size=1)
p<-ggplot()+geom_tile(data=env, aes(y=Depth_r, x=Dive, fill=fluo))+
scale_y_reverse()+theme_classic()+
scale_fill_gradientn(colors=rev(pals::brewer.rdylbu(15)))
p+geom_line(data.frame(clines),mapping=aes(x=Dive,y=thermo_c),size=1)
p<-ggplot()+geom_tile(data=env, aes(y=Depth_r, x=Dive, fill=temp))+
scale_y_reverse()+theme_classic()+
scale_fill_gradientn(colors=rev(pals::brewer.rdylbu(15)))
p+geom_line(data.frame(clines),mapping=aes(x=Dive,y=thermo_c),size=1)
p<-ggplot()+geom_tile(data=env, aes(y=Depth_r, x=Dive, fill=temp))+
scale_y_reverse()+theme_classic()+
scale_fill_gradientn(colors=rev(pals::brewer.rdylbu(15)))
p+geom_line(data.frame(clines),mapping=aes(x=Dive,y=thermo_c),size=1, name='Temperature')+
geom_line(data.frame(clines),mapping=aes(x=Dive,y=f),size=1,name='Fluorescence')
p<-ggplot()+geom_tile(data=env, aes(y=Depth_r, x=Dive, fill=temp))+
scale_y_reverse()+theme_classic()+
scale_fill_gradientn(colors=rev(pals::brewer.rdylbu(15)))
p+geom_line(data.frame(clines),mapping=aes(x=Dive,y=thermo_c),size=1, name='Temperature')+
geom_line(data.frame(clines),mapping=aes(x=Dive,y=fluo_c),size=1,name='Fluorescence')
p+geom_line(data.frame(clines),mapping=aes(x=Dive,y=thermo_c),size=1, name='Temperature')+
geom_line(data.frame(clines),mapping=aes(x=Dive,y=fluo_c),size=1,name='Fluorescence')+
geom_line(data.frame(clines),mapping=aes(x=Dive,y=sal_c),size=1,name='Salinity')+
scale_colour_manual(values = c('Temperature' = 'black',
'Fluorescence' = 'gray',
'Salinity'='white'))
p+geom_line(data.frame(clines),mapping=aes(x=Dive,y=thermo_c),size=1, color='Temperature')+
geom_line(data.frame(clines),mapping=aes(x=Dive,y=fluo_c),size=1,color='Fluorescence')+
geom_line(data.frame(clines),mapping=aes(x=Dive,y=sal_c),size=1,name='Salinity')+
scale_colour_manual(values = c('Temperature' = 'black',
'Fluorescence' = 'gray',
'Salinity'='white'))
p+geom_line(data.frame(clines),mapping=aes(x=Dive,y=thermo_c),size=1, value='Temperature')+
geom_line(data.frame(clines),mapping=aes(x=Dive,y=fluo_c),size=1,value='Fluorescence')+
geom_line(data.frame(clines),mapping=aes(x=Dive,y=sal_c),size=1,name='Salinity')+
scale_colour_manual(values = c('Temperature' = 'black',
'Fluorescence' = 'gray',
'Salinity'='white'))
p+geom_line(data.frame(clines),mapping=aes(x=Dive,y=thermo_c, color=variable),size=1, name='Temperature')+
geom_line(data.frame(clines),mapping=aes(x=Dive,y=fluo_c),size=1,name='Fluorescence')+
geom_line(data.frame(clines),mapping=aes(x=Dive,y=sal_c),size=1,name='Salinity')+
scale_colour_manual(values = c('Temperature' = 'black',
'Fluorescence' = 'gray',
'Salinity'='white'))
p+geom_line(data.frame(clines),mapping=aes(x=Dive,y=thermo_c),size=1, name='Temperature')+
geom_line(data.frame(clines),mapping=aes(x=Dive,y=fluo_c),size=1,name='Fluorescence')+
geom_line(data.frame(clines),mapping=aes(x=Dive,y=sal_c),size=1,name='Salinity')+
scale_colour_manual(values = c('Temperature' = 'black',
'Fluorescence' = 'gray',
'Salinity'='white'))
p+geom_line(data.frame(clines),mapping=aes(x=Dive,y=thermo_c),size=1,color='white', name='Temperature')+
geom_line(data.frame(clines),mapping=aes(x=Dive,y=fluo_c),size=1,name='Fluorescence')+
geom_line(data.frame(clines),mapping=aes(x=Dive,y=sal_c),size=1,name='Salinity')+
scale_colour_manual(values = c('Temperature' = 'black',
'Fluorescence' = 'gray',
'Salinity'='white'))
scale_color_discrete(name = "Y series", labels = c("Y2", "Y1")
p+geom_line(data.frame(clines),mapping=aes(x=Dive,y=thermo_c),size=1,color='white', name='Temperature')+
p<-ggplot()+geom_tile(data=env, aes(y=Depth_r, x=Dive, fill=temp))+
scale_y_reverse()+theme_classic()+
scale_fill_gradientn(colors=rev(pals::brewer.rdylbu(15)))
p+geom_line(data.frame(clines),mapping=aes(x=Dive,y=thermo_c),size=1,color='white', name='Temperature')+
geom_line(data.frame(clines),mapping=aes(x=Dive,y=fluo_c),size=1,name='Fluorescence')+
geom_line(data.frame(clines),mapping=aes(x=Dive,y=sal_c),size=1,name='Salinity')+
scale_color_discrete(name = "Y series", labels = c("Y2", "Y1"))
p+geom_line(data.frame(clines),mapping=aes(x=Dive,y=thermo_c,color='white'),size=1, name='Temperature')+
geom_line(data.frame(clines),mapping=aes(x=Dive,y=fluo_c,color='gray'),size=1,name='Fluorescence')+
geom_line(data.frame(clines),mapping=aes(x=Dive,y=sal_c),size=1,name='Salinity')+
scale_color_discrete(name = "Y series", labels = c("Y2", "Y1"))
p+geom_line(data.frame(clines),mapping=aes(x=Dive,y=thermo_c,color='Temperature'),size=1)+
geom_line(data.frame(clines),mapping=aes(x=Dive,y=fluo_c,color='gray'),size=1,name='Fluorescence')+
geom_line(data.frame(clines),mapping=aes(x=Dive,y=sal_c),size=1,name='Salinity')+
scale_color_discrete(name = "Y series", labels = c("Y2", "Y1"))
p+geom_line(data.frame(clines),mapping=aes(x=Dive,y=thermo_c,color='Temperature'),size=1)+
geom_line(data.frame(clines),mapping=aes(x=Dive,y=fluo_c,color='Fluoresecence'),size=1,name='Fluorescence')+
geom_line(data.frame(clines),mapping=aes(x=Dive,y=sal_c, color='Salinity'),size=1)+
scale_color_discrete(name = "", labels = c("Temperature", "Fluorescence","Salinity"))
p+geom_line(data.frame(clines),mapping=aes(x=Dive,y=thermo_c,color='Temperature'),size=1)+
geom_line(data.frame(clines),mapping=aes(x=Dive,y=fluo_c,color='Fluoresecence'),size=1,name='Fluorescence')+
geom_line(data.frame(clines),mapping=aes(x=Dive,y=sal_c, color='Salinity'),size=1)+
scale_color_manual(values = c(
'Temperature' = 'black',
'Fluorescence' = 'gray',
'Salinity' = 'black'))
p+geom_line(data.frame(clines),mapping=aes(x=Dive,y=thermo_c,color='Temperature'),size=1)+
geom_line(data.frame(clines),mapping=aes(x=Dive,y=fluo_c,color='Fluoresecence'),size=1,name='Fluorescence')+
geom_line(data.frame(clines),mapping=aes(x=Dive,y=sal_c, color='Salinity'),size=1)+
scale_color_manual(values = c(
'Temperature' = 'black',
'Fluorescence' = 'gray',
'Salinity' = 'black'), name='')
?scale_color_manual
p+geom_line(data.frame(clines),mapping=aes(x=Dive,y=thermo_c),size=1,name='Temperature')+
geom_line(data.frame(clines),mapping=aes(x=Dive,y=fluo_c),size=1,name='Fluorescence')+
geom_line(data.frame(clines),mapping=aes(x=Dive,y=sal_c),size=1, name='Salinity')+
scale_color_manual(values = c('Temperature' = 'black',
'Fluorescence' = 'gray',
'Salinity' = 'black'), name='')
p<-ggplot()+geom_tile(data=env, aes(y=Depth_r, x=Dive, fill=temp))+
scale_y_reverse()+theme_classic()+
scale_fill_gradientn(colors=rev(pals::brewer.rdylbu(15)))
p+geom_line(data.frame(clines),mapping=aes(x=Dive,y=thermo_c),size=1,name='Temperature')+
geom_line(data.frame(clines),mapping=aes(x=Dive,y=fluo_c),size=1,name='Fluorescence')+
geom_line(data.frame(clines),mapping=aes(x=Dive,y=sal_c),size=1, name='Salinity')+
scale_color_manual(values = c('Temperature' = 'black',
'Fluorescence' = 'gray',
'Salinity' = 'black'), name='')
p+geom_line(data.frame(clines),mapping=aes(x=Dive,y=thermo_c),size=1,name='Temperature')+
geom_line(data.frame(clines),mapping=aes(x=Dive,y=fluo_c, color='f'),size=1,name='Fluorescence')+
geom_line(data.frame(clines),mapping=aes(x=Dive,y=sal_c),size=1, name='Salinity')+
scale_color_manual(values = c('Temperature' = 'black',
'Fluorescence' = 'gray',
'Salinity' = 'black'), name='')
p+geom_line(data.frame(clines),mapping=aes(x=Dive,y=thermo_c),size=1,name='Temperature')+
geom_line(data.frame(clines),mapping=aes(x=Dive,y=fluo_c, color='Fluorescence'),size=1,name='Fluorescence')+
geom_line(data.frame(clines),mapping=aes(x=Dive,y=sal_c),size=1, name='Salinity')+
scale_color_manual(values = c('Temperature' = 'black',
'Fluorescence' = 'gray',
'Salinity' = 'black'), name='')
p+geom_line(data.frame(clines),mapping=aes(x=Dive,y=thermo_c, color='Temperature'),size=1,name='Temperature')+
geom_line(data.frame(clines),mapping=aes(x=Dive,y=fluo_c, color='Fluorescence'),size=1,name='Fluorescence')+
geom_line(data.frame(clines),mapping=aes(x=Dive,y=sal_c),size=1, name='Salinity')+
scale_color_manual(values = c('Temperature' = 'black',
'Fluorescence' = 'gray',
'Salinity' = 'black'), name='')
p+geom_line(data.frame(clines),mapping=aes(x=Dive,y=thermo_c, color='Temperature'),size=1,name='Temperature')+
geom_line(data.frame(clines),mapping=aes(x=Dive,y=fluo_c, color='Fluorescence'),size=1,name='Fluorescence')+
geom_line(data.frame(clines),mapping=aes(x=Dive,y=sal_c, color='Salinity'),size=1, name='Salinity')+
scale_color_manual(values = c('Temperature' = 'black',
'Fluorescence' = 'gray',
'Salinity' = 'black'), name='')
p+geom_line(data.frame(clines),mapping=aes(x=Dive,y=thermo_c, color='Temperature'),size=1,name='Temperature')+
geom_line(data.frame(clines),mapping=aes(x=Dive,y=fluo_c, color='Fluorescence'),size=1,name='Fluorescence')+
geom_line(data.frame(clines),mapping=aes(x=Dive,y=sal_c, color='Salinity'),size=1)+
scale_color_manual(values = c('Temperature' = 'black',
'Fluorescence' = 'gray',
'Salinity' = 'white'), name='')
p+geom_line(data.frame(clines),mapping=aes(x=Dive,y=thermo_c, color='Temperature'),size=1)+
geom_line(data.frame(clines),mapping=aes(x=Dive,y=fluo_c, color='Fluorescence'),size=1)+
geom_line(data.frame(clines),mapping=aes(x=Dive,y=sal_c, color='Salinity'),size=1)+
scale_color_manual(values = c('Temperature' = 'black',
'Fluorescence' = 'gray',
'Salinity' = 'white'), name='')
p+geom_line(data.frame(clines),mapping=aes(x=Dive,y=thermo_c, color='Temperature'),size=1)+
geom_line(data.frame(clines),mapping=aes(x=Dive,y=fluo_c, color='Fluorescence'),size=1)+
geom_line(data.frame(clines),mapping=aes(x=Dive,y=sal_c, color='Salinity'),size=1)+
scale_color_manual(values = c('Temperature' = 'black',
'Fluorescence' = 'gray',
'Salinity' = 'green'), name='')
p+geom_line(data.frame(clines),mapping=aes(x=Dive,y=thermo_c, color='Temperature'),size=1)+
geom_line(data.frame(clines),mapping=aes(x=Dive,y=fluo_c, color='Fluorescence'),size=1)+
geom_line(data.frame(clines),mapping=aes(x=Dive,y=sal_c, color='Salinity'),size=1)+
scale_color_manual(values = c('Temperature' = 'black',
'Fluorescence' = 'gray',
'Salinity' = 'darkgray'), name='')
p+geom_line(data.frame(clines),mapping=aes(x=Dive,y=thermo_c, color='Temperature'),size=1)+
geom_line(data.frame(clines),mapping=aes(x=Dive,y=fluo_c, color='Fluorescence'),size=1)+
geom_line(data.frame(clines),mapping=aes(x=Dive,y=sal_c, color='Salinity'),size=1)+
scale_color_manual(values = c('Temperature' = 'black',
'Fluorescence' = 'bluegray',
'Salinity' = 'darkgray'), name='')
devtools::build()
devtools::build()
install.packages("~/Zonar/DVM/ZooDVM_0.1.0.tar.gz", repos = NULL, type = "source")
?ZooDVM::anomaly
